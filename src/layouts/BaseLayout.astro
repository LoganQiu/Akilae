---
import { Font } from 'astro:assets';
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import "../styles/global.css";

export interface Props {
  title?: string;
  subtitle?: string;
  description?: string;
  keywords?: string[];
  class?: string;
  pageType?: "home" | "single" | "list";
}

const {
  title = "A Hugo theme inspired by paged.js",
  subtitle,
  description = "A website built through Astro with the hugo-paged theme.",
  keywords = [],
  class: pageClass = "",
  pageType = "single",
} = Astro.props;

const siteTitle = "A Hugo theme inspired by paged.js";
const pageTitle =
  title === siteTitle
    ? title
    : `${title}${subtitle ? ` - ${subtitle}` : ""} - ${siteTitle}`;

const currentPath = Astro.url.pathname;
const section = currentPath.split("/")[1] || "";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content={Astro.generator} />
    <title>{pageTitle}</title>
    <meta property="og:title" content={pageTitle} />
    <meta
      property="og:type"
      content={pageType === "home" ? "website" : "article"}
    />
    <meta name="twitter:card" content="summary" />
    <meta property="description" content={description} />
    <meta property="og:description" content={description} />
    {
      keywords.length > 0 && (
        <meta property="keywords" content={keywords.join(", ")} />
      )
    }
    <link
      rel="alternate"
      type="application/rss+xml"
      title={siteTitle}
      href="/rss.xml"
    />
    <script is:inline src="/toggle-theme.js"></script>
    <Font cssVariable="--font-jost" preload />
    <Font cssVariable="--font-libertinus" preload />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"
    />
  </head>
  <body>

    <div class="crop-h"></div>
    <div class="crop-v"></div>
    <div class="crop-c"></div>

    <Header />

    <main class="flex-1 max-w-app mx-auto p-4 w-full">
      <slot />
    </main>

    <Footer />
  </body>
</html>
